DROP TABLE "PROIZVODJAC" CASCADE CONSTRAINTS;
DROP TABLE "PRODAJNO_MESTO" CASCADE CONSTRAINTS;
DROP TABLE "LEK" CASCADE CONSTRAINTS;
DROP TABLE "RECEPT" CASCADE CONSTRAINTS;
DROP TABLE "ZAPOSLENI" CASCADE CONSTRAINTS;
DROP TABLE "FARMACEUT" CASCADE CONSTRAINTS;
DROP TABLE "PAKOVANJE" CASCADE CONSTRAINTS;
DROP TABLE "NEZELJENI_EFEKTI" CASCADE CONSTRAINTS;
DROP TABLE "INDIKACIJE" CASCADE CONSTRAINTS;
DROP TABLE "KONTRAINDIKACIJE" CASCADE CONSTRAINTS;
DROP TABLE "PRODAJE" CASCADE CONSTRAINTS;


DROP SEQUENCE "ID_PROIZVODJACA_SEQ";
DROP SEQUENCE "ID_PRODAJNOG_MESTA_SEQ";
DROP SEQUENCE "SERIJSKI_BROJ_SEQ";
DROP SEQUENCE "ID_ZAPOSLENOG_SEQ";
DROP SEQUENCE "ID_PAKOVANJA_SEQ";

CREATE SEQUENCE "ID_PROIZVODJACA_SEQ" MINVALUE 1 MAXVALUE 99999 INCREMENT BY 1 START WITH 1 NOORDER NOCYCLE;
CREATE SEQUENCE "ID_PRODAJNOG_MESTA_SEQ" MINVALUE 1 MAXVALUE 99999 INCREMENT BY 1 START WITH 1 NOORDER NOCYCLE;
CREATE SEQUENCE "SERIJSKI_BROJ_SEQ" MINVALUE 1 MAXVALUE 99999 INCREMENT BY 1 START WITH 1 NOORDER NOCYCLE;
CREATE SEQUENCE "ID_ZAPOSLENOG_SEQ" MINVALUE 1 MAXVALUE 9999999999 INCREMENT BY 1 START WITH 1 NOORDER NOCYCLE;
CREATE SEQUENCE "ID_PAKOVANJA_SEQ" MINVALUE 1 MAXVALUE 99999 INCREMENT BY 1 START WITH 1 NOORDER NOCYCLE;

CREATE TABLE "PROIZVODJAC"
(	"ID_PROIZVODJACA" NUMBER(5,0) CONSTRAINT PROIZVODJAC_PK PRIMARY KEY,
	"IME_PROIZVODJACA" VARCHAR2(50 BYTE)
);

CREATE TABLE "PRODAJNO_MESTO"
(	"ID_PRODAJNOG_MESTA" NUMBER (10,0) CONSTRAINT PRODAJNO_MESTO_PK PRIMARY KEY,
	"MESTO" VARCHAR2(30 BYTE) NOT NULL,
	"ADRESA" VARCHAR2(50 BYTE) NOT NULL,
	"NAZIV" VARCHAR2(30 BYTE) NOT NULL
);

CREATE TABLE "LEK" 
(	"KOMERCIJALNI_NAZIV" VARCHAR2(40 BYTE) CONSTRAINT LEK_PK PRIMARY KEY, 
	"HEMIJSKI_NAZIV" VARCHAR2(60 BYTE) UNIQUE, 
	"DEJSTVO_LEKA" VARCHAR2(800 BYTE) NOT NULL, 
	"CENA_LEKA" NUMBER(10,0) CONSTRAINT LEK_CENA_CK CHECK ("CENA_LEKA" > 0),
	"PROCENAT_PARTICIPACIJE" NUMBER(3,0) CONSTRAINT LEK_PARTICIPACIJA_CK CHECK ("PROCENAT_PARTICIPACIJE" >= 0),
	"IZDAVANJE_NA_RECEPT" VARCHAR2(2 BYTE) NOT NULL,
	"NACIN_DOZIRANJA_ZA_DECU" VARCHAR2(200 BYTE), 
	"NACIN_DOZIRANJA_ZA_ODRASLE" VARCHAR2(200 BYTE), 
	"NACIN_DOZIRANJA_ZA_TRUDNICE" VARCHAR2(200 BYTE), 
	"TIP_LEKA" VARCHAR2(100 BYTE),
	"ID_PROIZV" NUMBER(5,0) 
   ) ;   
   
ALTER TABLE LEK ADD CONSTRAINT IZDAVANJE_NA_RECEPT_CHK CHECK ("IZDAVANJE_NA_RECEPT" IN ('DA', 'NE')) ENABLE; 
ALTER TABLE LEK ADD CONSTRAINT LEK_TIP_CHK CHECK ("TIP_LEKA" IN ('ANTIBIOTIK', 'ANALGETIK', 'ANTIPIRETIK', 'DIURETIK')) ENABLE;
ALTER TABLE "LEK" ADD CONSTRAINT "ID_PROIZV_FK" FOREIGN KEY ("ID_PROIZV")
		REFERENCES "PROIZVODJAC" ("ID_PROIZVODJACA") ENABLE;


 





CREATE TABLE "ZAPOSLENI" 
(	"ID_ZAPOSLENOG" NUMBER(10,0) CONSTRAINT ZAPOSLENI_PK PRIMARY KEY, 
	"ADRESA" VARCHAR2(60 BYTE), 
	"BROJ_TELEFONA" VARCHAR2(300 BYTE), 
	"DATUM_RODJENJA" DATE NOT NULL,
	"IME" VARCHAR2(60 BYTE) NOT NULL, 
	"PREZIME" VARCHAR2(60 BYTE) NOT NULL, 
	"MATICNI_BROJ" VARCHAR2(20 BYTE) NOT NULL,
	"ID_PR_MESTO" NUMBER(10,0)  
);
ALTER TABLE "ZAPOSLENI" ADD CONSTRAINT "ID_PR_MESTO_FK" FOREIGN KEY ("ID_PR_MESTO")
		REFERENCES "PRODAJNO_MESTO" ("ID_PRODAJNOG_MESTA") ENABLE;


CREATE TABLE "FARMACEUT" 
(	"ID_ZAPOSLEN" NUMBER(10,0) CONSTRAINT FARMACEUT_PK PRIMARY KEY, 
	"DATUM_DIPLOMIRANJA" DATE NOT NULL,
	"DATUM_OBNOVE_LICENCE" DATE   

);
ALTER TABLE "FARMACEUT" ADD CONSTRAINT "FARMACEUT_ZAPOSLENI_FK" FOREIGN KEY ("ID_ZAPOSLEN")
		REFERENCES "ZAPOSLENI" ("ID_ZAPOSLENOG") ENABLE;


CREATE TABLE "RECEPT"
(	"SERIJSKI_BROJ" NUMBER (10,0) CONSTRAINT RECEPT_PK PRIMARY KEY,
	"TIP" VARCHAR2(20 BYTE) NOT NULL,
	"DATUM_IZDAVANJA" DATE NOT NULL,
	"OBLIK_PAKOVANJA" VARCHAR2(20 BYTE),
	"KOLICINA_LEKA" VARCHAR2(20 BYTE) DEFAULT 1 NOT NULL,
	"DATUM_REALIZACIJE" DATE DEFAULT SYSDATE,
	"LEKARID" NUMBER (7, 0) NOT NULL,
	"KOMERCIJALNI_NAZIV_LEKA" VARCHAR2(40 BYTE),
	"ID_ZAPOSLENI" NUMBER(10,0),
	"ID_PROD_MESTO" NUMBER(10,0)
);
ALTER TABLE "RECEPT" ADD CONSTRAINT "KOMERCIJALNI_NAZIV_LEKA_FK" FOREIGN KEY ("KOMERCIJALNI_NAZIV_LEKA")
		REFERENCES "LEK" ("KOMERCIJALNI_NAZIV") ENABLE;
ALTER TABLE "RECEPT" ADD CONSTRAINT RECEPT_TIP_CHK CHECK ("OBLIK_PAKOVANJA" IN ('TABLETA', 'SIRUP', 'PRASAK', 'INEKCIJA')) ENABLE;

ALTER TABLE "RECEPT" ADD CONSTRAINT "REALIZUJE_ZAPOSLENI_FK" FOREIGN KEY ("ID_ZAPOSLENI")
		REFERENCES "ZAPOSLENI" ("ID_ZAPOSLENOG") ENABLE;

ALTER TABLE "RECEPT" ADD CONSTRAINT "REALIZUJE_PROD_MESTO_FK" FOREIGN KEY ("ID_PROD_MESTO")
		REFERENCES "PRODAJNO_MESTO" ("ID_PRODAJNOG_MESTA") ENABLE;


CREATE TABLE "PAKOVANJE" 
(	"ID_PAKOVANJA" NUMBER(10,0) CONSTRAINT PAKOVANJE_PK PRIMARY KEY, 
	"KOLICINA" NUMBER(10,0) DEFAULT 1 NOT NULL, 
	"SASTAV" VARCHAR2( 40 BYTE) NOT NULL,
	"TIP_PAKOVANJA" VARCHAR2( 20 BYTE),
  	"ID_LEKA" VARCHAR2(40 BYTE)

);
ALTER TABLE "PAKOVANJE" ADD CONSTRAINT TIP_PAKOVANJA_CHK CHECK ("TIP_PAKOVANJA" IN ('TABLETA', 'SIRUP', 'PRASAK', 'INEKCIJA')) ENABLE;
ALTER TABLE "PAKOVANJE" ADD CONSTRAINT "ID_LEKA_FK" FOREIGN KEY ("ID_LEKA")
		REFERENCES "LEK" ("KOMERCIJALNI_NAZIV") ENABLE;


CREATE TABLE "NEZELJENI_EFEKTI" 
(	"ID_LEKA" VARCHAR2( 40 BYTE), 
	"OPIS_EFEKTA" VARCHAR2( 200 BYTE) NOT NULL UNIQUE 

);
ALTER TABLE "NEZELJENI_EFEKTI" ADD CONSTRAINT "NEZELJENI_EFEKTI_PK" PRIMARY KEY ("OPIS_EFEKTA","ID_LEKA") ENABLE;
ALTER TABLE "NEZELJENI_EFEKTI" ADD CONSTRAINT "NEZELJENI_EFEKTI_FK" FOREIGN KEY ("ID_LEKA")
		REFERENCES "LEK" ("KOMERCIJALNI_NAZIV") ENABLE;




CREATE TABLE "INDIKACIJE" 
(	"ID_LEKA_IND" VARCHAR2( 40 BYTE), 
	"OPIS_INDIKACIJA" VARCHAR2( 200 BYTE) NOT NULL UNIQUE 

);
ALTER TABLE "INDIKACIJE" ADD CONSTRAINT "INDIKACIJE_PK" PRIMARY KEY ("OPIS_INDIKACIJA" ,"ID_LEKA_IND") ENABLE;
ALTER TABLE "INDIKACIJE" ADD CONSTRAINT "INDIKACIJE_FK" FOREIGN KEY ("ID_LEKA_IND")
		REFERENCES "LEK" ("KOMERCIJALNI_NAZIV") ENABLE;

CREATE TABLE "KONTRAINDIKACIJE" 
(	"ID_LEKA_KIND" VARCHAR2( 40 BYTE), 
	"OPIS_KONTRAINDIKACIJA" VARCHAR2( 200 BYTE) NOT NULL UNIQUE

);
ALTER TABLE "KONTRAINDIKACIJE" ADD CONSTRAINT "KONTRAINDIKACIJE_PK" PRIMARY KEY ("OPIS_KONTRAINDIKACIJA","ID_LEKA_KIND") ENABLE;
ALTER TABLE "KONTRAINDIKACIJE" ADD CONSTRAINT "KONTRAINDIKACIJE_FK" FOREIGN KEY ("ID_LEKA_KIND")
		REFERENCES "LEK" ("KOMERCIJALNI_NAZIV") ENABLE;

----------VEZA------------
CREATE TABLE "PRODAJE" 
(	"ID_PROD_M" NUMBER(5,0) , 
	"ID_LEKA_PRODAJA" VARCHAR2( 40 BYTE),
  "KOLICINA_LEKA" NUMBER(7,0)
);
ALTER TABLE "PRODAJE" ADD CONSTRAINT "PRODAJE_PK" PRIMARY KEY ("ID_PROD_M", "ID_LEKA_PRODAJA") ENABLE;
ALTER TABLE "PRODAJE" ADD CONSTRAINT "PRODAJE_LEK_FK" FOREIGN KEY ("ID_LEKA_PRODAJA")
		REFERENCES "LEK" ("KOMERCIJALNI_NAZIV") ENABLE;
ALTER TABLE "PRODAJE" ADD CONSTRAINT "PRODAJE_MESTO_FK" FOREIGN KEY ("ID_PROD_M")
		REFERENCES "PRODAJNO_MESTO" ("ID_PRODAJNOG_MESTA") ENABLE;















INSERT INTO "PROIZVODJAC"("ID_PROIZVODJACA", "IME_PROIZVODJACA")
VALUES ('1', 'HEMOFARM');
INSERT INTO "PROIZVODJAC"("ID_PROIZVODJACA", "IME_PROIZVODJACA")
VALUES	('2', 'KRKA');
INSERT INTO "PROIZVODJAC"("ID_PROIZVODJACA", "IME_PROIZVODJACA")
VALUES	('3', 'SANDOZ');
INSERT INTO "PROIZVODJAC"("ID_PROIZVODJACA", "IME_PROIZVODJACA")
VALUES	('4', 'GALENIKA');

INSERT INTO "PRODAJNO_MESTO"("ID_PRODAJNOG_MESTA", "MESTO", "ADRESA", "NAZIV")
VALUES ('1', 'NIS', 'MILOJKA LESJANINA 48', 'ALFA');
INSERT INTO "PRODAJNO_MESTO"("ID_PRODAJNOG_MESTA", "MESTO", "ADRESA", "NAZIV")
VALUES	('2', 'NIS', 'TRG KRALJA ALEKSANDRA UJEDINITELJA 2A', 'ALEKSANDRIJA');
INSERT INTO "PRODAJNO_MESTO"("ID_PRODAJNOG_MESTA", "MESTO", "ADRESA", "NAZIV")
VALUES	('3', 'NIS', 'KNJAŽEVAÈKA 72', 'BELADORIA');
INSERT INTO "PRODAJNO_MESTO"("ID_PRODAJNOG_MESTA", "MESTO", "ADRESA", "NAZIV")
VALUES	('4', 'NOVI SAD', 'BULEVAR CARA LAZARA 21', 'ZEGIN');

INSERT INTO "LEK"("KOMERCIJALNI_NAZIV", "HEMIJSKI_NAZIV", "DEJSTVO_LEKA", "CENA_LEKA", "PROCENAT_PARTICIPACIJE", "IZDAVANJE_NA_RECEPT", "NACIN_DOZIRANJA_ZA_DECU", "NACIN_DOZIRANJA_ZA_ODRASLE", "NACIN_DOZIRANJA_ZA_TRUDNICE", "TIP_LEKA", "ID_PROIZV")
VALUES ('ERITROMICIN', 'TRIHLORMETAN', 'DELUJE BAKTERIOSTACKI PROTIV BAKTERIJSKIH INFEKCIJA', '900', '0', 'DA', '250MG NA 8SATI', '500MG NA 8SATI', '500MG NA 8SATI', 'ANTIBIOTIK', '1');   
INSERT INTO "LEK"("KOMERCIJALNI_NAZIV", "HEMIJSKI_NAZIV", "DEJSTVO_LEKA", "CENA_LEKA", "PROCENAT_PARTICIPACIJE", "IZDAVANJE_NA_RECEPT", "NACIN_DOZIRANJA_ZA_DECU", "NACIN_DOZIRANJA_ZA_ODRASLE", "NACIN_DOZIRANJA_ZA_TRUDNICE", "TIP_LEKA", "ID_PROIZV")
VALUES	('BROMAZEPAM', 'TRIBROMTETRAHLORID', 'ZA SPAVANJE', '600', '0', 'DA', '30 MINUTA PRE SPAVANJA', '30 MINUTA PRE SPAVANJA', '30 MINUTA PRE SPAVANJA', 'ANALGETIK', '2');



INSERT INTO "ZAPOSLENI"("ID_ZAPOSLENOG", "ADRESA", "BROJ_TELEFONA", "DATUM_RODJENJA", "IME", "PREZIME", "MATICNI_BROJ", "ID_PR_MESTO")
VALUES ('1', 'STALJINSKA 55,NIS', '065555444', TO_DATE('01.01.2006','DD.MM.RRRR'), 'RADOJE', 'RADOVIC', '998765', '1');
INSERT INTO "ZAPOSLENI"("ID_ZAPOSLENOG", "ADRESA", "BROJ_TELEFONA", "DATUM_RODJENJA", "IME", "PREZIME", "MATICNI_BROJ", "ID_PR_MESTO")
VALUES	('2', 'STALJINSKA 56,NIS', '066777888', TO_DATE('01.01.2006','DD.MM.RRRR'), 'RIKO', 'DONIC', '555446', '2');
INSERT INTO "ZAPOSLENI"("ID_ZAPOSLENOG", "ADRESA", "BROJ_TELEFONA", "DATUM_RODJENJA", "IME", "PREZIME", "MATICNI_BROJ", "ID_PR_MESTO")
VALUES	('3','JOVANA RISTICA 11,NOVI SAD', '069111222', TO_DATE('01.01.2006','DD.MM.RRRR'), 'JOVAN', 'JOVIC', '667788', '3');


INSERT INTO "FARMACEUT"("ID_ZAPOSLEN", "DATUM_DIPLOMIRANJA", "DATUM_OBNOVE_LICENCE")
VALUES ('1', TO_DATE('01.01.2006','DD.MM.RRRR'), TO_DATE('01.01.2006','DD.MM.RRRR'));
INSERT INTO "FARMACEUT"("ID_ZAPOSLEN", "DATUM_DIPLOMIRANJA", "DATUM_OBNOVE_LICENCE")
VALUES	('2', TO_DATE('01.01.2006','DD.MM.RRRR'), TO_DATE('01.01.2006','DD.MM.RRRR'));
INSERT INTO "FARMACEUT"("ID_ZAPOSLEN", "DATUM_DIPLOMIRANJA", "DATUM_OBNOVE_LICENCE")
VALUES	('3', TO_DATE('01.01.2006','DD.MM.RRRR'), TO_DATE('01.01.2006','DD.MM.RRRR'));

INSERT INTO "RECEPT"("SERIJSKI_BROJ", "TIP", "DATUM_IZDAVANJA", "OBLIK_PAKOVANJA", "KOLICINA_LEKA","DATUM_REALIZACIJE", "LEKARID", "KOMERCIJALNI_NAZIV_LEKA", "ID_ZAPOSLENI", "ID_PROD_MESTO")
VALUES ('1334', 'LEKARSKI', TO_DATE('01.01.2001','DD.MM.RRRR'),'TABLETA', '2', TO_DATE('01.01.2001','DD.MM.RRRR'),'1', 'ERITROMICIN', '1', '1');
INSERT INTO "RECEPT"("SERIJSKI_BROJ", "TIP", "DATUM_IZDAVANJA", "OBLIK_PAKOVANJA", "KOLICINA_LEKA","DATUM_REALIZACIJE", "LEKARID", "KOMERCIJALNI_NAZIV_LEKA", "ID_ZAPOSLENI", "ID_PROD_MESTO")
VALUES	('1356', 'LEKARSKI', TO_DATE('01.01.2016','DD.MM.RRRR'), 'PRASAK', '5', TO_DATE('01.01.2007','DD.MM.RRRR'), '2', 'BROMAZEPAM', '2', '2');
INSERT INTO "RECEPT"("SERIJSKI_BROJ", "TIP", "DATUM_IZDAVANJA", "OBLIK_PAKOVANJA", "KOLICINA_LEKA","DATUM_REALIZACIJE", "LEKARID", "KOMERCIJALNI_NAZIV_LEKA", "ID_ZAPOSLENI", "ID_PROD_MESTO")
VALUES	('1407', 'LEKARSKI', TO_DATE('01.01.2006','DD.MM.RRRR'), 'INEKCIJA', '5', TO_DATE('01.01.2001','DD.MM.RRRR'),'3', 'BROMAZEPAM','3', '3');

INSERT INTO "PAKOVANJE"("ID_PAKOVANJA", "KOLICINA", "SASTAV", "TIP_PAKOVANJA","ID_LEKA")
VALUES ('1', '25', 'LEK I UPUTSTVO', 'TABLETA','BROMAZEPAM');
INSERT INTO "PAKOVANJE"("ID_PAKOVANJA", "KOLICINA", "SASTAV", "TIP_PAKOVANJA","ID_LEKA")
VALUES	('2', '30', 'LEK I UPUTSTVO', 'SIRUP','ERITROMICIN');
INSERT INTO "PAKOVANJE"("ID_PAKOVANJA", "KOLICINA", "SASTAV", "TIP_PAKOVANJA","ID_LEKA")
VALUES	('3', '40', 'LEK I UPUTSTVO', 'PRASAK','BROMAZEPAM');
INSERT INTO "PAKOVANJE"("ID_PAKOVANJA", "KOLICINA", "SASTAV", "TIP_PAKOVANJA","ID_LEKA")
VALUES	('4', '30', 'LEK I UPUTSTVO', 'INEKCIJA','ERITROMICIN');

INSERT INTO "NEZELJENI_EFEKTI"("ID_LEKA", "OPIS_EFEKTA")
VALUES ('ERITROMICIN', 'VRTOGLAVICA');
INSERT INTO "NEZELJENI_EFEKTI"("ID_LEKA", "OPIS_EFEKTA")
VALUES	('BROMAZEPAM', 'BOL U STOMAKU I LEDJIMA');

INSERT INTO "INDIKACIJE"("ID_LEKA_IND", "OPIS_INDIKACIJA")
VALUES ('ERITROMICIN', 'KASLJANJE');
INSERT INTO "INDIKACIJE"("ID_LEKA_IND", "OPIS_INDIKACIJA")
VALUES	('BROMAZEPAM', 'BOLNO GRLO');

INSERT INTO "KONTRAINDIKACIJE"("ID_LEKA_KIND", "OPIS_KONTRAINDIKACIJA")
VALUES ( 'ERITROMICIN', 'NIZAK PRITISAK');
INSERT INTO "KONTRAINDIKACIJE"("ID_LEKA_KIND", "OPIS_KONTRAINDIKACIJA")
VALUES	('BROMAZEPAM', 'OSTECENA JETRA');

INSERT INTO "PRODAJE"("ID_PROD_M", "ID_LEKA_PRODAJA", "KOLICINA_LEKA")
VALUES ('1','ERITROMICIN','50');
INSERT INTO "PRODAJE"("ID_PROD_M", "ID_LEKA_PRODAJA", "KOLICINA_LEKA")
VALUES	('1', 'BROMAZEPAM','70');
INSERT INTO "PRODAJE"("ID_PROD_M", "ID_LEKA_PRODAJA", "KOLICINA_LEKA")
VALUES	('2', 'BROMAZEPAM','150');
